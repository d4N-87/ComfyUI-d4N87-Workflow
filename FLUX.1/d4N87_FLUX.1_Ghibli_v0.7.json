{
  "id": "5b99b4bb-9450-432f-9f62-0fab2f50e2f9",
  "revision": 0,
  "last_node_id": 180,
  "last_link_id": 330,
  "nodes": [
    {
      "id": 10,
      "type": "VAELoader",
      "pos": [
        22.619037628173828,
        2323.728515625
      ],
      "size": [
        307.4958801269531,
        58
      ],
      "flags": {},
      "order": 0,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "VAE",
          "shape": 3,
          "type": "VAE",
          "slot_index": 0,
          "links": [
            154
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.27",
        "Node name for S&R": "VAELoader"
      },
      "widgets_values": [
        "FLUX\\AE_BF16.safetensors"
      ],
      "color": "#322",
      "bgcolor": "#533"
    },
    {
      "id": 26,
      "type": "Note",
      "pos": [
        16.76705551147461,
        240.64010620117188
      ],
      "size": [
        312.9932556152344,
        88
      ],
      "flags": {},
      "order": 1,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "Qui viene caricato il modello di FLUX."
      ],
      "color": "#222",
      "bgcolor": "#000"
    },
    {
      "id": 27,
      "type": "Note",
      "pos": [
        16.1860294342041,
        561.867431640625
      ],
      "size": [
        313.245849609375,
        88
      ],
      "flags": {},
      "order": 2,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "Qui vengono caricati il CLIP L e il T5-xxl.\n\nE' possibile anche caricare il T5 GGUF."
      ],
      "color": "#222",
      "bgcolor": "#000"
    },
    {
      "id": 30,
      "type": "Note",
      "pos": [
        27.33760643005371,
        2421.004150390625
      ],
      "size": [
        300.6068115234375,
        88
      ],
      "flags": {},
      "order": 3,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "Qui viene caricato il VAE, per FLUX è necessario il suo AE.sft."
      ],
      "color": "#222",
      "bgcolor": "#000"
    },
    {
      "id": 62,
      "type": "DualCLIPLoaderGGUF",
      "pos": [
        15.013006210327148,
        415.60406494140625
      ],
      "size": [
        315,
        106
      ],
      "flags": {},
      "order": 4,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "CLIP",
          "shape": 3,
          "type": "CLIP",
          "slot_index": 0,
          "links": [
            105
          ]
        }
      ],
      "properties": {
        "cnr_id": "ComfyUI-GGUF",
        "ver": "bc5223b0e37e053dbec2ea5e5f52c2fd4b8f712a",
        "Node name for S&R": "DualCLIPLoaderGGUF"
      },
      "widgets_values": [
        "CLIP_L.safetensors",
        "T5-xxl_v1.1_Q8_0.gguf",
        "flux"
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 80,
      "type": "UNETLoader",
      "pos": [
        14.767056465148926,
        115.64012145996094
      ],
      "size": [
        315,
        82
      ],
      "flags": {},
      "order": 5,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "MODEL",
          "shape": 3,
          "type": "MODEL",
          "slot_index": 0,
          "links": []
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.27",
        "Node name for S&R": "UNETLoader"
      },
      "widgets_values": [
        "FLUX\\FLUX.1_Dev_FP16.safetensors",
        "default"
      ],
      "color": "#223",
      "bgcolor": "#335"
    },
    {
      "id": 112,
      "type": "Note",
      "pos": [
        2478.853271484375,
        282.33258056640625
      ],
      "size": [
        316.61614990234375,
        88
      ],
      "flags": {},
      "order": 6,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "Qui viene caricato il modello Redux e il CLIP Vision."
      ],
      "color": "#222",
      "bgcolor": "#000"
    },
    {
      "id": 29,
      "type": "Note",
      "pos": [
        1455.120361328125,
        1258.514892578125
      ],
      "size": [
        308.0760803222656,
        88
      ],
      "flags": {},
      "order": 7,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "Qui viene effettuata l'elaborazione vera e propria.\n"
      ],
      "color": "#222",
      "bgcolor": "#000"
    },
    {
      "id": 134,
      "type": "Note",
      "pos": [
        476.20452880859375,
        897.9793701171875
      ],
      "size": [
        360.7381286621094,
        191.9635467529297
      ],
      "flags": {},
      "order": 8,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "properties": {},
      "widgets_values": [
        "Qui viene caricato il modello di Florece 2, nel caso non fosse presente sul PC verrà scaricato automaticamente.\n\nSelezionare BF16 in caso di RTX30/40."
      ],
      "color": "#222",
      "bgcolor": "#000"
    },
    {
      "id": 135,
      "type": "JWStringConcat",
      "pos": [
        1427.7178955078125,
        362.7644958496094
      ],
      "size": [
        210,
        82
      ],
      "flags": {
        "collapsed": false
      },
      "order": 36,
      "mode": 0,
      "inputs": [
        {
          "name": "a",
          "type": "STRING",
          "widget": {
            "name": "a"
          },
          "link": 259
        },
        {
          "name": "b",
          "type": "STRING",
          "widget": {
            "name": "b"
          },
          "link": 260
        }
      ],
      "outputs": [
        {
          "name": "STRING",
          "shape": 3,
          "type": "STRING",
          "slot_index": 0,
          "links": [
            241,
            244
          ]
        }
      ],
      "title": "Unione prompt",
      "properties": {
        "cnr_id": "comfyui-various",
        "ver": "5bd85aaf7616878471469c4ec7e11bbd0cef3bf2",
        "Node name for S&R": "JWStringConcat"
      },
      "widgets_values": [
        "",
        ""
      ],
      "color": "#232",
      "bgcolor": "#353"
    },
    {
      "id": 131,
      "type": "Florence2Run",
      "pos": [
        858.2708740234375,
        740.8387451171875
      ],
      "size": [
        400,
        364
      ],
      "flags": {},
      "order": 33,
      "mode": 0,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 245
        },
        {
          "name": "florence2_model",
          "type": "FL2MODEL",
          "link": 240
        }
      ],
      "outputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "links": null
        },
        {
          "name": "mask",
          "type": "MASK",
          "links": null
        },
        {
          "name": "caption",
          "type": "STRING",
          "slot_index": 2,
          "links": [
            260
          ]
        },
        {
          "name": "data",
          "type": "JSON",
          "links": null
        }
      ],
      "properties": {
        "cnr_id": "comfyui-florence2",
        "ver": "257fec56102cf42c7e5a28920b6d1258983ae71c",
        "Node name for S&R": "Florence2Run"
      },
      "widgets_values": [
        "",
        "more_detailed_caption",
        true,
        false,
        1024,
        3,
        true,
        "",
        798372827618215,
        "randomize"
      ],
      "color": "#2a363b",
      "bgcolor": "#3f5159"
    },
    {
      "id": 94,
      "type": "CLIPVisionLoader",
      "pos": [
        2480.4873046875,
        409.3049011230469
      ],
      "size": [
        370,
        60
      ],
      "flags": {},
      "order": 9,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "CLIP_VISION",
          "type": "CLIP_VISION",
          "slot_index": 0,
          "links": [
            179
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.27",
        "Node name for S&R": "CLIPVisionLoader"
      },
      "widgets_values": [
        "SigCLIP_Vision_Patch14_384.safetensors"
      ],
      "color": "#323",
      "bgcolor": "#535"
    },
    {
      "id": 63,
      "type": "UnetLoaderGGUF",
      "pos": [
        14.767056465148926,
        16.640106201171875
      ],
      "size": [
        315,
        58
      ],
      "flags": {},
      "order": 10,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "MODEL",
          "shape": 3,
          "type": "MODEL",
          "slot_index": 0,
          "links": [
            199
          ]
        }
      ],
      "properties": {
        "cnr_id": "ComfyUI-GGUF",
        "ver": "bc5223b0e37e053dbec2ea5e5f52c2fd4b8f712a",
        "Node name for S&R": "UnetLoaderGGUF"
      },
      "widgets_values": [
        "FLUX.1\\FLUX.1_Dev_Q8_0.gguf"
      ],
      "color": "#223",
      "bgcolor": "#335"
    },
    {
      "id": 53,
      "type": "ModelSamplingFlux",
      "pos": [
        794.927734375,
        19.78107452392578
      ],
      "size": [
        315,
        130
      ],
      "flags": {},
      "order": 35,
      "mode": 0,
      "inputs": [
        {
          "name": "model",
          "type": "MODEL",
          "link": 227
        },
        {
          "name": "width",
          "type": "INT",
          "widget": {
            "name": "width"
          },
          "link": 231
        },
        {
          "name": "height",
          "type": "INT",
          "widget": {
            "name": "height"
          },
          "link": 232
        }
      ],
      "outputs": [
        {
          "name": "MODEL",
          "shape": 3,
          "type": "MODEL",
          "slot_index": 0,
          "links": [
            210
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.27",
        "Node name for S&R": "ModelSamplingFlux"
      },
      "widgets_values": [
        1.5,
        1,
        1024,
        1024
      ],
      "color": "#332922",
      "bgcolor": "#593930"
    },
    {
      "id": 132,
      "type": "DownloadAndLoadFlorence2Model",
      "pos": [
        475.83563232421875,
        748.1817016601562
      ],
      "size": [
        365.4000244140625,
        106
      ],
      "flags": {},
      "order": 11,
      "mode": 0,
      "inputs": [
        {
          "name": "lora",
          "shape": 7,
          "type": "PEFTLORA",
          "link": null
        }
      ],
      "outputs": [
        {
          "name": "florence2_model",
          "type": "FL2MODEL",
          "slot_index": 0,
          "links": [
            240
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfyui-florence2",
        "ver": "257fec56102cf42c7e5a28920b6d1258983ae71c",
        "Node name for S&R": "DownloadAndLoadFlorence2Model"
      },
      "widgets_values": [
        "MiaoshouAI/Florence-2-large-PromptGen-v2.0",
        "bf16",
        "sdpa"
      ],
      "color": "#2a363b",
      "bgcolor": "#3f5159"
    },
    {
      "id": 113,
      "type": "KSampler",
      "pos": [
        1449.963623046875,
        740.2097778320312
      ],
      "size": [
        315,
        474
      ],
      "flags": {},
      "order": 43,
      "mode": 0,
      "inputs": [
        {
          "name": "model",
          "type": "MODEL",
          "link": 210
        },
        {
          "name": "positive",
          "type": "CONDITIONING",
          "link": 329
        },
        {
          "name": "negative",
          "type": "CONDITIONING",
          "link": 279
        },
        {
          "name": "latent_image",
          "type": "LATENT",
          "link": 276
        }
      ],
      "outputs": [
        {
          "name": "LATENT",
          "type": "LATENT",
          "slot_index": 0,
          "links": [
            206
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.27",
        "Node name for S&R": "KSampler"
      },
      "widgets_values": [
        713419681641299,
        "randomize",
        20,
        1,
        "deis",
        "simple",
        0.45000000000000007
      ],
      "color": "#223",
      "bgcolor": "#335"
    },
    {
      "id": 111,
      "type": "LoraLoaderModelOnly",
      "pos": [
        448.271240234375,
        24.64544677734375
      ],
      "size": [
        315,
        82
      ],
      "flags": {},
      "order": 30,
      "mode": 0,
      "inputs": [
        {
          "name": "model",
          "type": "MODEL",
          "link": 229
        }
      ],
      "outputs": [
        {
          "name": "MODEL",
          "shape": 3,
          "type": "MODEL",
          "slot_index": 0,
          "links": [
            227
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.27",
        "Node name for S&R": "LoraLoaderModelOnly"
      },
      "widgets_values": [
        "FLUX.1\\Ghibli.safetensors",
        0.8000000000000002
      ],
      "color": "#323",
      "bgcolor": "#535"
    },
    {
      "id": 110,
      "type": "Note",
      "pos": [
        22.224853515625,
        741.582763671875
      ],
      "size": [
        300.6068115234375,
        88
      ],
      "flags": {},
      "order": 12,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "Qui viene caricata l'immagine originale."
      ],
      "color": "#222",
      "bgcolor": "#000"
    },
    {
      "id": 169,
      "type": "Note",
      "pos": [
        15.427911758422852,
        1529.62451171875
      ],
      "size": [
        309.8270263671875,
        88
      ],
      "flags": {},
      "order": 13,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "Qui viene caricata l'immagine che verrà poi usata come stile per l'elaborazione."
      ],
      "color": "#222",
      "bgcolor": "#000"
    },
    {
      "id": 50,
      "type": "Reroute",
      "pos": [
        346.8630065917969,
        74.48544311523438
      ],
      "size": [
        75,
        26
      ],
      "flags": {},
      "order": 25,
      "mode": 0,
      "inputs": [
        {
          "name": "",
          "type": "*",
          "link": 199
        }
      ],
      "outputs": [
        {
          "name": "",
          "type": "MODEL",
          "slot_index": 0,
          "links": [
            229
          ]
        }
      ],
      "properties": {
        "showOutputText": false,
        "horizontal": false
      },
      "color": "#223",
      "bgcolor": "#335"
    },
    {
      "id": 130,
      "type": "Reroute",
      "pos": [
        350.7826232910156,
        868.5565185546875
      ],
      "size": [
        75,
        26
      ],
      "flags": {},
      "order": 27,
      "mode": 0,
      "inputs": [
        {
          "name": "",
          "type": "*",
          "link": 237
        }
      ],
      "outputs": [
        {
          "name": "",
          "type": "IMAGE",
          "links": [
            239,
            245
          ]
        }
      ],
      "title": "IMG",
      "properties": {
        "showOutputText": false,
        "horizontal": false
      },
      "color": "#2a363b",
      "bgcolor": "#3f5159"
    },
    {
      "id": 168,
      "type": "Reroute",
      "pos": [
        355.21630859375,
        1665.50927734375
      ],
      "size": [
        75,
        26
      ],
      "flags": {},
      "order": 26,
      "mode": 0,
      "inputs": [
        {
          "name": "",
          "type": "*",
          "link": 315
        }
      ],
      "outputs": [
        {
          "name": "",
          "type": "IMAGE",
          "links": [
            316,
            317
          ]
        }
      ],
      "properties": {
        "showOutputText": false,
        "horizontal": false
      },
      "color": "#2a363b",
      "bgcolor": "#3f5159"
    },
    {
      "id": 71,
      "type": "Reroute",
      "pos": [
        359.4767150878906,
        2325.0458984375
      ],
      "size": [
        75,
        26
      ],
      "flags": {},
      "order": 23,
      "mode": 0,
      "inputs": [
        {
          "name": "",
          "type": "*",
          "link": 154
        }
      ],
      "outputs": [
        {
          "name": "",
          "type": "VAE",
          "slot_index": 0,
          "links": [
            132,
            234
          ]
        }
      ],
      "properties": {
        "showOutputText": false,
        "horizontal": false
      },
      "color": "#322",
      "bgcolor": "#533"
    },
    {
      "id": 114,
      "type": "CLIPTextEncode",
      "pos": [
        464.3981628417969,
        446.9574890136719
      ],
      "size": [
        400,
        200
      ],
      "flags": {
        "collapsed": true
      },
      "order": 28,
      "mode": 0,
      "inputs": [
        {
          "name": "clip",
          "type": "CLIP",
          "link": 202
        }
      ],
      "outputs": [
        {
          "name": "CONDITIONING",
          "type": "CONDITIONING",
          "slot_index": 0,
          "links": [
            203
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.27",
        "Node name for S&R": "CLIPTextEncode"
      },
      "widgets_values": [
        ""
      ],
      "color": "#322",
      "bgcolor": "#533"
    },
    {
      "id": 115,
      "type": "ConditioningZeroOut",
      "pos": [
        697.7489624023438,
        446.82763671875
      ],
      "size": [
        317.4000244140625,
        26
      ],
      "flags": {
        "collapsed": true
      },
      "order": 34,
      "mode": 0,
      "inputs": [
        {
          "name": "conditioning",
          "type": "CONDITIONING",
          "link": 203
        }
      ],
      "outputs": [
        {
          "name": "CONDITIONING",
          "type": "CONDITIONING",
          "slot_index": 0,
          "links": [
            279
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.27",
        "Node name for S&R": "ConditioningZeroOut"
      },
      "widgets_values": [],
      "color": "#322",
      "bgcolor": "#533"
    },
    {
      "id": 129,
      "type": "VAEEncode",
      "pos": [
        475.09075927734375,
        1382.486572265625
      ],
      "size": [
        210,
        46
      ],
      "flags": {},
      "order": 32,
      "mode": 0,
      "inputs": [
        {
          "name": "pixels",
          "type": "IMAGE",
          "link": 239
        },
        {
          "name": "vae",
          "type": "VAE",
          "link": 234
        }
      ],
      "outputs": [
        {
          "name": "LATENT",
          "type": "LATENT",
          "links": [
            276
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.27",
        "Node name for S&R": "VAEEncode"
      },
      "widgets_values": [],
      "color": "#322",
      "bgcolor": "#533"
    },
    {
      "id": 90,
      "type": "PreviewImage",
      "pos": [
        2162.6669921875,
        743.4305419921875
      ],
      "size": [
        519.8390502929688,
        592.18896484375
      ],
      "flags": {},
      "order": 47,
      "mode": 4,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 175
        }
      ],
      "outputs": [],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.27",
        "Node name for S&R": "PreviewImage"
      },
      "widgets_values": [],
      "color": "#233",
      "bgcolor": "#355"
    },
    {
      "id": 171,
      "type": "PreviewImage",
      "pos": [
        2175.68212890625,
        1450.7005615234375
      ],
      "size": [
        519.8390502929688,
        592.18896484375
      ],
      "flags": {},
      "order": 49,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 318
        }
      ],
      "outputs": [],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.27",
        "Node name for S&R": "PreviewImage"
      },
      "widgets_values": [],
      "color": "#2a363b",
      "bgcolor": "#3f5159"
    },
    {
      "id": 174,
      "type": "CLIPTextEncode",
      "pos": [
        1745.4039306640625,
        -153.9542236328125
      ],
      "size": [
        226.8000030517578,
        58
      ],
      "flags": {},
      "order": 29,
      "mode": 0,
      "inputs": [
        {
          "name": "clip",
          "type": "CLIP",
          "link": 330
        },
        {
          "name": "text",
          "type": "STRING",
          "widget": {
            "name": "text"
          },
          "link": 320
        }
      ],
      "outputs": [
        {
          "name": "CONDITIONING",
          "type": "CONDITIONING",
          "slot_index": 0,
          "links": []
        }
      ],
      "title": "CLIP Text Encode (Positive)",
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.27",
        "Node name for S&R": "CLIPTextEncode"
      },
      "widgets_values": [
        ""
      ],
      "color": "#232",
      "bgcolor": "#353"
    },
    {
      "id": 37,
      "type": "Note",
      "pos": [
        2128.9833984375,
        373.1312255859375
      ],
      "size": [
        310.38177490234375,
        88
      ],
      "flags": {},
      "order": 14,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "Qui viene impostato il Guidance, un valore maggiore 2 aumenta il realismo ma ha effetto solamente sul modello dev."
      ],
      "color": "#222",
      "bgcolor": "#000"
    },
    {
      "id": 175,
      "type": "Note",
      "pos": [
        1427.5595703125,
        485.42578125
      ],
      "size": [
        232.2989044189453,
        106.44023132324219
      ],
      "flags": {},
      "order": 15,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "In questo passaggio il prompt è creato da Florence2, ma viene aggiunta una parte iniziale relativa al LoRa o comunque personalizzabile."
      ],
      "color": "#222",
      "bgcolor": "#000"
    },
    {
      "id": 176,
      "type": "Note",
      "pos": [
        1730.2679443359375,
        -54.69743347167969
      ],
      "size": [
        242.74656677246094,
        228.84890747070312
      ],
      "flags": {},
      "order": 16,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "Usando questo blocco il prompt bisogna crearlo da zero."
      ],
      "color": "#222",
      "bgcolor": "#000"
    },
    {
      "id": 138,
      "type": "CLIPTextEncode",
      "pos": [
        1681.8782958984375,
        278.8912048339844
      ],
      "size": [
        293.123046875,
        58
      ],
      "flags": {},
      "order": 38,
      "mode": 0,
      "inputs": [
        {
          "name": "clip",
          "type": "CLIP",
          "link": 246
        },
        {
          "name": "text",
          "type": "STRING",
          "widget": {
            "name": "text"
          },
          "link": 244
        }
      ],
      "outputs": [
        {
          "name": "CONDITIONING",
          "type": "CONDITIONING",
          "slot_index": 0,
          "links": [
            321
          ]
        }
      ],
      "title": "CLIP Text Encode (Positive Prompt)",
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.27",
        "Node name for S&R": "CLIPTextEncode"
      },
      "widgets_values": [
        "best quality, 4k, HDR, a tracking shot of a beautiful scene of the sea waves on the beach with a massive explosion in the water"
      ],
      "color": "#232",
      "bgcolor": "#353"
    },
    {
      "id": 177,
      "type": "Reroute",
      "pos": [
        2003.938232421875,
        176.74526977539062
      ],
      "size": [
        75,
        26
      ],
      "flags": {},
      "order": 39,
      "mode": 0,
      "inputs": [
        {
          "name": "",
          "type": "*",
          "link": 321
        }
      ],
      "outputs": [
        {
          "name": "",
          "type": "CONDITIONING",
          "links": [
            322
          ]
        }
      ],
      "title": "CONDITIONING",
      "properties": {
        "showOutputText": false,
        "horizontal": false
      },
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 42,
      "type": "VAEDecodeTiled",
      "pos": [
        1809.8818359375,
        739.4698486328125
      ],
      "size": [
        210,
        150
      ],
      "flags": {},
      "order": 44,
      "mode": 0,
      "inputs": [
        {
          "name": "samples",
          "type": "LATENT",
          "link": 206
        },
        {
          "name": "vae",
          "type": "VAE",
          "link": 132
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "shape": 3,
          "type": "IMAGE",
          "slot_index": 0,
          "links": [
            51
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.27",
        "Node name for S&R": "VAEDecodeTiled"
      },
      "widgets_values": [
        512,
        64,
        64,
        8
      ],
      "color": "#322",
      "bgcolor": "#533"
    },
    {
      "id": 172,
      "type": "Note",
      "pos": [
        1867.9776611328125,
        985.532958984375
      ],
      "size": [
        385.5068054199219,
        183.69479370117188
      ],
      "flags": {
        "collapsed": true
      },
      "order": 17,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "title": "d4N87",
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "https://www.youtube.com/@d4n87\nhttps://www.patreon.com/c/d4N87\n\n\n     _ _  _       __ ___ _____ \n  __| | || |   /\\ \\ ( _ )___  |\n / _` | || |_ /  \\/ / _ \\  / / \n| (_| |__   _/ /\\  / (_) |/ /  \n \\__,_|  |_| \\_\\ \\/ \\___//_/   \n                             "
      ],
      "color": "#323",
      "bgcolor": "#535"
    },
    {
      "id": 31,
      "type": "Reroute",
      "pos": [
        2049.071533203125,
        741.7452392578125
      ],
      "size": [
        75,
        26
      ],
      "flags": {},
      "order": 45,
      "mode": 0,
      "inputs": [
        {
          "name": "",
          "type": "*",
          "link": 51
        }
      ],
      "outputs": [
        {
          "name": "",
          "type": "IMAGE",
          "slot_index": 0,
          "links": [
            43,
            175,
            312
          ]
        }
      ],
      "properties": {
        "showOutputText": false,
        "horizontal": false
      },
      "color": "#2a363b",
      "bgcolor": "#3f5159"
    },
    {
      "id": 133,
      "type": "ShowText|pysssss",
      "pos": [
        1676.635009765625,
        381.2369689941406
      ],
      "size": [
        302.8824157714844,
        221.8470458984375
      ],
      "flags": {},
      "order": 37,
      "mode": 0,
      "inputs": [
        {
          "name": "text",
          "type": "STRING",
          "widget": {
            "name": "text"
          },
          "link": 241
        }
      ],
      "outputs": [
        {
          "name": "STRING",
          "shape": 6,
          "type": "STRING",
          "links": null
        }
      ],
      "title": "Prompt finale",
      "properties": {
        "cnr_id": "comfyui-custom-scripts",
        "ver": "9f7b3215e6af317603056a9a1666bf6e83e28835",
        "Node name for S&R": "ShowText|pysssss"
      },
      "widgets_values": [
        "",
        "source_anime, Ghiblistyle, anime coloring,A man with a white beard and glasses is in the middle of the frame, wearing a white shirt and a gold chain necklace. He appears to be in his late 60s or early 70s, with short, dark hair and a full beard. he is looking directly at the camera with a neutral expression, and his mouth is slightly open, revealing his teeth. the background shows shelves filled with various jars and cans of various colors, including red, yellow, green, and white. the jars are arranged neatly on the shelves, and there are price tags visible on the wall behind the man. the image is a still from a video, and it appears to have been taken in a grocery store."
      ],
      "color": "#232",
      "bgcolor": "#353"
    },
    {
      "id": 170,
      "type": "SaveImage",
      "pos": [
        2711.888671875,
        1450.5130615234375
      ],
      "size": [
        383.889892578125,
        385.70196533203125
      ],
      "flags": {},
      "order": 50,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 319
        }
      ],
      "outputs": [],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.27",
        "Node name for S&R": "SaveImage"
      },
      "widgets_values": [
        "ComfyUI"
      ],
      "color": "#2a363b",
      "bgcolor": "#3f5159"
    },
    {
      "id": 9,
      "type": "SaveImage",
      "pos": [
        2699.6669921875,
        748.4305419921875
      ],
      "size": [
        383.889892578125,
        385.70196533203125
      ],
      "flags": {},
      "order": 46,
      "mode": 4,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 43
        }
      ],
      "outputs": [],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.27",
        "Node name for S&R": "SaveImage"
      },
      "widgets_values": [
        "ComfyUI"
      ],
      "color": "#233",
      "bgcolor": "#355"
    },
    {
      "id": 159,
      "type": "ColorMatch",
      "pos": [
        1845.657958984375,
        1450.971435546875
      ],
      "size": [
        315,
        102
      ],
      "flags": {},
      "order": 48,
      "mode": 0,
      "inputs": [
        {
          "name": "image_ref",
          "type": "IMAGE",
          "link": 317
        },
        {
          "name": "image_target",
          "type": "IMAGE",
          "link": 312
        }
      ],
      "outputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "links": [
            318,
            319
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfyui-kjnodes",
        "ver": "91bdcfdf6016c0a706bca800186591890d55e391",
        "Node name for S&R": "ColorMatch"
      },
      "widgets_values": [
        "mvgd",
        0.45000000000000007
      ],
      "color": "#2a363b",
      "bgcolor": "#3f5159"
    },
    {
      "id": 144,
      "type": "LoadAndResizeImage",
      "pos": [
        14.661036491394043,
        1666.0877685546875
      ],
      "size": [
        315,
        566
      ],
      "flags": {},
      "order": 18,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "links": [
            315
          ]
        },
        {
          "name": "mask",
          "type": "MASK",
          "links": null
        },
        {
          "name": "width",
          "type": "INT",
          "links": []
        },
        {
          "name": "height",
          "type": "INT",
          "links": []
        },
        {
          "name": "image_path",
          "type": "STRING",
          "links": null
        }
      ],
      "properties": {
        "cnr_id": "comfyui-kjnodes",
        "ver": "91bdcfdf6016c0a706bca800186591890d55e391",
        "Node name for S&R": "LoadAndResizeImage"
      },
      "widgets_values": [
        "ghibli.jpg",
        false,
        0,
        0,
        1,
        false,
        2,
        "alpha",
        "",
        "image"
      ],
      "color": "#233",
      "bgcolor": "#355"
    },
    {
      "id": 95,
      "type": "CLIPVisionEncode",
      "pos": [
        2862.2197265625,
        407.4035339355469
      ],
      "size": [
        290,
        78
      ],
      "flags": {},
      "order": 31,
      "mode": 0,
      "inputs": [
        {
          "name": "clip_vision",
          "type": "CLIP_VISION",
          "link": 179
        },
        {
          "name": "image",
          "type": "IMAGE",
          "link": 316
        }
      ],
      "outputs": [
        {
          "name": "CLIP_VISION_OUTPUT",
          "type": "CLIP_VISION_OUTPUT",
          "slot_index": 0,
          "links": [
            323
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.27",
        "Node name for S&R": "CLIPVisionEncode"
      },
      "widgets_values": [
        "center"
      ],
      "color": "#323",
      "bgcolor": "#535"
    },
    {
      "id": 35,
      "type": "FluxGuidance",
      "pos": [
        2127.067138671875,
        278.0697326660156
      ],
      "size": [
        317.4000244140625,
        58
      ],
      "flags": {},
      "order": 40,
      "mode": 0,
      "inputs": [
        {
          "name": "conditioning",
          "type": "CONDITIONING",
          "link": 322
        }
      ],
      "outputs": [
        {
          "name": "CONDITIONING",
          "shape": 3,
          "type": "CONDITIONING",
          "slot_index": 0,
          "links": [
            324,
            326
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.27",
        "Node name for S&R": "FluxGuidance"
      },
      "widgets_values": [
        3.5
      ],
      "color": "#332922",
      "bgcolor": "#593930"
    },
    {
      "id": 98,
      "type": "StyleModelLoader",
      "pos": [
        2806.050048828125,
        283.79693603515625
      ],
      "size": [
        340,
        60
      ],
      "flags": {},
      "order": 19,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "STYLE_MODEL",
          "type": "STYLE_MODEL",
          "links": [
            328
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.27",
        "Node name for S&R": "StyleModelLoader"
      },
      "widgets_values": [
        "FLUX.1_Tools\\FLUX.1_Redux_Dev.safetensors"
      ],
      "color": "#323",
      "bgcolor": "#535"
    },
    {
      "id": 178,
      "type": "StyleModelApplyAdvanced",
      "pos": [
        3176.790771484375,
        328.06610107421875
      ],
      "size": [
        393,
        98
      ],
      "flags": {},
      "order": 41,
      "mode": 0,
      "inputs": [
        {
          "name": "conditioning",
          "type": "CONDITIONING",
          "link": 324
        },
        {
          "name": "style_model",
          "type": "STYLE_MODEL",
          "link": 328
        },
        {
          "name": "clip_vision_output",
          "type": "CLIP_VISION_OUTPUT",
          "link": 323
        }
      ],
      "outputs": [
        {
          "name": "CONDITIONING",
          "type": "CONDITIONING",
          "links": [
            325
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfyui-kjnodes",
        "ver": "91bdcfdf6016c0a706bca800186591890d55e391",
        "Node name for S&R": "StyleModelApplyAdvanced"
      },
      "widgets_values": [
        0.8000000000000002
      ],
      "color": "#323",
      "bgcolor": "#535"
    },
    {
      "id": 179,
      "type": "ConditioningAverage",
      "pos": [
        3639.36572265625,
        336.2266540527344
      ],
      "size": [
        380.4000244140625,
        78
      ],
      "flags": {},
      "order": 42,
      "mode": 0,
      "inputs": [
        {
          "name": "conditioning_to",
          "type": "CONDITIONING",
          "link": 325
        },
        {
          "name": "conditioning_from",
          "type": "CONDITIONING",
          "link": 326
        }
      ],
      "outputs": [
        {
          "name": "CONDITIONING",
          "type": "CONDITIONING",
          "links": [
            329
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.27",
        "Node name for S&R": "ConditioningAverage"
      },
      "widgets_values": [
        0.18000000000000005
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 128,
      "type": "LoadAndResizeImage",
      "pos": [
        15.47407341003418,
        867.7254028320312
      ],
      "size": [
        315,
        566
      ],
      "flags": {},
      "order": 20,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "links": [
            237
          ]
        },
        {
          "name": "mask",
          "type": "MASK",
          "links": null
        },
        {
          "name": "width",
          "type": "INT",
          "links": [
            231
          ]
        },
        {
          "name": "height",
          "type": "INT",
          "links": [
            232
          ]
        },
        {
          "name": "image_path",
          "type": "STRING",
          "links": null
        }
      ],
      "properties": {
        "cnr_id": "comfyui-kjnodes",
        "ver": "91bdcfdf6016c0a706bca800186591890d55e391",
        "Node name for S&R": "LoadAndResizeImage"
      },
      "widgets_values": [
        "brega.jpeg",
        false,
        0,
        0,
        1,
        false,
        2,
        "alpha",
        "",
        "image"
      ],
      "color": "#233",
      "bgcolor": "#355"
    },
    {
      "id": 49,
      "type": "Reroute",
      "pos": [
        349.6445617675781,
        416.406005859375
      ],
      "size": [
        75,
        26
      ],
      "flags": {},
      "order": 24,
      "mode": 0,
      "inputs": [
        {
          "name": "",
          "type": "*",
          "link": 105
        }
      ],
      "outputs": [
        {
          "name": "",
          "type": "CLIP",
          "slot_index": 0,
          "links": [
            202,
            246,
            330
          ]
        }
      ],
      "properties": {
        "showOutputText": false,
        "horizontal": false
      },
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 173,
      "type": "PrimitiveNode",
      "pos": [
        1384.1341552734375,
        -160.73614501953125
      ],
      "size": [
        330.0604553222656,
        334.8871154785156
      ],
      "flags": {},
      "order": 21,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "STRING",
          "type": "STRING",
          "widget": {
            "name": "text"
          },
          "slot_index": 0,
          "links": [
            320
          ]
        }
      ],
      "title": "Positive",
      "properties": {
        "Run widget replace on values": false
      },
      "widgets_values": [
        ""
      ],
      "color": "#232",
      "bgcolor": "#353"
    },
    {
      "id": 140,
      "type": "Primitive string multiline [Crystools]",
      "pos": [
        1150.5345458984375,
        275.7342529296875
      ],
      "size": [
        261.0957336425781,
        324.06988525390625
      ],
      "flags": {},
      "order": 22,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "string",
          "type": "STRING",
          "links": [
            243,
            259
          ]
        }
      ],
      "title": "Aggiunta al prompt Florence 2",
      "properties": {
        "cnr_id": "comfyui-crystools",
        "ver": "576b44b9b79e3bf4b5d50457a28924d89a42e7e1",
        "Node name for S&R": "Primitive string multiline [Crystools]"
      },
      "widgets_values": [
        "It is a frame of a Ghibli style movie, anime coloring, "
      ],
      "color": "#232",
      "bgcolor": "#353"
    }
  ],
  "links": [
    [
      43,
      31,
      0,
      9,
      0,
      "IMAGE"
    ],
    [
      51,
      42,
      0,
      31,
      0,
      "*"
    ],
    [
      105,
      62,
      0,
      49,
      0,
      "*"
    ],
    [
      132,
      71,
      0,
      42,
      1,
      "VAE"
    ],
    [
      154,
      10,
      0,
      71,
      0,
      "*"
    ],
    [
      175,
      31,
      0,
      90,
      0,
      "IMAGE"
    ],
    [
      179,
      94,
      0,
      95,
      0,
      "CLIP_VISION"
    ],
    [
      199,
      63,
      0,
      50,
      0,
      "*"
    ],
    [
      202,
      49,
      0,
      114,
      0,
      "CLIP"
    ],
    [
      203,
      114,
      0,
      115,
      0,
      "CONDITIONING"
    ],
    [
      206,
      113,
      0,
      42,
      0,
      "LATENT"
    ],
    [
      210,
      53,
      0,
      113,
      0,
      "MODEL"
    ],
    [
      227,
      111,
      0,
      53,
      0,
      "MODEL"
    ],
    [
      229,
      50,
      0,
      111,
      0,
      "MODEL"
    ],
    [
      231,
      128,
      2,
      53,
      1,
      "INT"
    ],
    [
      232,
      128,
      3,
      53,
      2,
      "INT"
    ],
    [
      234,
      71,
      0,
      129,
      1,
      "VAE"
    ],
    [
      237,
      128,
      0,
      130,
      0,
      "*"
    ],
    [
      239,
      130,
      0,
      129,
      0,
      "IMAGE"
    ],
    [
      240,
      132,
      0,
      131,
      1,
      "FL2MODEL"
    ],
    [
      241,
      135,
      0,
      133,
      0,
      "STRING"
    ],
    [
      244,
      135,
      0,
      138,
      1,
      "STRING"
    ],
    [
      245,
      130,
      0,
      131,
      0,
      "IMAGE"
    ],
    [
      246,
      49,
      0,
      138,
      0,
      "CLIP"
    ],
    [
      259,
      140,
      0,
      135,
      0,
      "STRING"
    ],
    [
      260,
      131,
      2,
      135,
      1,
      "STRING"
    ],
    [
      276,
      129,
      0,
      113,
      3,
      "LATENT"
    ],
    [
      279,
      115,
      0,
      113,
      2,
      "CONDITIONING"
    ],
    [
      312,
      31,
      0,
      159,
      1,
      "IMAGE"
    ],
    [
      315,
      144,
      0,
      168,
      0,
      "*"
    ],
    [
      316,
      168,
      0,
      95,
      1,
      "IMAGE"
    ],
    [
      317,
      168,
      0,
      159,
      0,
      "IMAGE"
    ],
    [
      318,
      159,
      0,
      171,
      0,
      "IMAGE"
    ],
    [
      319,
      159,
      0,
      170,
      0,
      "IMAGE"
    ],
    [
      320,
      173,
      0,
      174,
      1,
      "STRING"
    ],
    [
      321,
      138,
      0,
      177,
      0,
      "*"
    ],
    [
      322,
      177,
      0,
      35,
      0,
      "CONDITIONING"
    ],
    [
      323,
      95,
      0,
      178,
      2,
      "CLIP_VISION_OUTPUT"
    ],
    [
      324,
      35,
      0,
      178,
      0,
      "CONDITIONING"
    ],
    [
      325,
      178,
      0,
      179,
      0,
      "CONDITIONING"
    ],
    [
      326,
      35,
      0,
      179,
      1,
      "CONDITIONING"
    ],
    [
      328,
      98,
      0,
      178,
      1,
      "STYLE_MODEL"
    ],
    [
      329,
      179,
      0,
      113,
      1,
      "CONDITIONING"
    ],
    [
      330,
      49,
      0,
      174,
      0,
      "CLIP"
    ]
  ],
  "groups": [
    {
      "id": 1,
      "title": "Model Sampling - d4N87",
      "bounding": [
        784.927734375,
        -53.21892166137695,
        335,
        214
      ],
      "color": "#8AA",
      "font_size": 24,
      "flags": {}
    },
    {
      "id": 2,
      "title": "Caricamento LoRA - d4N87",
      "bounding": [
        442.271240234375,
        -53.35453796386719,
        333,
        173
      ],
      "color": "#A88",
      "font_size": 24,
      "flags": {}
    },
    {
      "id": 3,
      "title": "Guidance - d4N87",
      "bounding": [
        2116.424072265625,
        203.69322204589844,
        332.9236145019531,
        262.5115051269531
      ],
      "color": "#b58b2a",
      "font_size": 24,
      "flags": {}
    },
    {
      "id": 4,
      "title": "Anteprima & Salvataggio - d4N87",
      "bounding": [
        2151.67236328125,
        667.1876831054688,
        960,
        685
      ],
      "color": "#8AA",
      "font_size": 24,
      "flags": {}
    },
    {
      "id": 5,
      "title": "VAE - d4N87",
      "bounding": [
        11.337605476379395,
        2249.004150390625,
        328.2329406738281,
        268.6700439453125
      ],
      "color": "#b06634",
      "font_size": 24,
      "flags": {}
    },
    {
      "id": 6,
      "title": "Elaborazione - d4N87",
      "bounding": [
        1442.204345703125,
        667.9099731445312,
        335.5887451171875,
        680.6538696289062
      ],
      "color": "#3f789e",
      "font_size": 24,
      "flags": {}
    },
    {
      "id": 8,
      "title": "Caricamento CLIP - d4N87",
      "bounding": [
        6.454133987426758,
        342.0990295410156,
        333.1649475097656,
        317.092529296875
      ],
      "color": "#8AA",
      "font_size": 24,
      "flags": {}
    },
    {
      "id": 9,
      "title": "Caricamento modello - d4N87",
      "bounding": [
        6.767056941986084,
        -56.35987854003906,
        332,
        392.7624206542969
      ],
      "color": "#3f789e",
      "font_size": 24,
      "flags": {}
    },
    {
      "id": 11,
      "title": "Immagine - d4N87",
      "bounding": [
        4.685296058654785,
        664.898193359375,
        335,
        784.8344116210938
      ],
      "color": "#8AA",
      "font_size": 24,
      "flags": {}
    },
    {
      "id": 12,
      "title": "Redux & CLIP Vision - d4N87",
      "bounding": [
        2469.853515625,
        210.7327423095703,
        1126.077880859375,
        280.4279479980469
      ],
      "color": "#8AA",
      "font_size": 24,
      "flags": {}
    },
    {
      "id": 13,
      "title": "Florence 2 Prompt - d4N87",
      "bounding": [
        465.83551025390625,
        667.2387084960938,
        799.6895751953125,
        443.7761535644531
      ],
      "color": "#A88",
      "font_size": 24,
      "flags": {}
    },
    {
      "id": 14,
      "title": "Prompt con Florence2 - d4N87",
      "bounding": [
        1140.147216796875,
        202.1289520263672,
        847.5767822265625,
        408.8965759277344
      ],
      "color": "#8A8",
      "font_size": 24,
      "flags": {}
    },
    {
      "id": 15,
      "title": "Image Rif - d4N87",
      "bounding": [
        4.661036968231201,
        1456.0245361328125,
        335.0000305175781,
        786.0631103515625
      ],
      "color": "#8AA",
      "font_size": 24,
      "flags": {}
    },
    {
      "id": 16,
      "title": "Anteprima & Salvataggio con CC - d4N87",
      "bounding": [
        1835.657958984375,
        1373.220947265625,
        1275.133056640625,
        687.835205078125
      ],
      "color": "#88A",
      "font_size": 24,
      "flags": {}
    },
    {
      "id": 17,
      "title": "Prompt - d4N87",
      "bounding": [
        1374.1341552734375,
        -234.33609008789062,
        608.06982421875,
        418.48712158203125
      ],
      "color": "#8A8",
      "font_size": 24,
      "flags": {}
    }
  ],
  "config": {},
  "extra": {
    "ds": {
      "scale": 1.017716012084734,
      "offset": [
        -498.6897323219745,
        106.70266434644105
      ]
    },
    "VHS_latentpreview": false,
    "VHS_latentpreviewrate": 0,
    "VHS_MetadataImage": true,
    "VHS_KeepIntermediate": true
  },
  "version": 0.4
}